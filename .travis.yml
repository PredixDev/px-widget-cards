sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: pEZKndKzZ0qeJv/Yh5G0oRFjlmadSGpvaCCJPFbyaLFnWgVIOSv+I8+apiVtc35bWwdgLYx+nfBq5z2wpN6/wp8oLe/XKhuakCDFkuBlIGBBh6Cn+IlQgiGadyoTTeOUFe8vK71xCDlgI3THPiOQGess8UycidHuVylj9rLEleOF+mtEmKO+2/+HBQYSXG3wZfXG2SvZkuXvrOce+p+XF6+ci17EAfsoUWaZKR/y5zeqdHU2EhpgrQWREHrVBiGsb4kAl+Nc2LAjmsDE1nWd37wt1wAYoOygMK7lXtSB04ixIqJwV4uKqLh1xELOx2MBgSLPXElBeB+U/iaskIHhKGmdeakDuZoOVVEsvphWx91DuIPb8KKALuE58CEf9T0/Ty+vMkCeKaqBSItD2FBqjreFjf7O1GP/++xjem6Oc0RllIXoXck9KENu9N0BBXCfIo+pCbk6dYIYznWY01z7KtEGDtFj9fi3SQDDnNjJSXUg/jHzu1WVUu6pJulC8NuOnybHxGSO/YZUPSdFQRuly5XT8NgsdJIP2V1HXWeywaUH9zXzOPb3fBr2U5JzDulbEvZC4nzF8AOC0D2zai8tvI+R7p5J1tFGAF3KuYum8sh47OaKFMl2ddeMlfP2f3KbL2wY6xJCHS5asAJwqXf58H7g5sJkcadgUUrlXkfUhjI=
  - secure: nUr6liMwGXvJbbasGEezII0YWTubvjDrUUK2j5WHtXjAtEdBaqVQBWs9nOcBLQSlatlCIPZOfbgcXEHlBGnXYq5Yinz+3KPaGHLBk0J08wqxK3XmDVClvpJ9xhNn2tOnM+YD1hZ8sfpQy2Pg6mLJnHwKRkm0mSUjggtL+9YSPM+fcjQaiLzmBCHVF/tSUmnfjXMhxsLcn7sMxg17/z9/ITfEhCHDX6+w4FIc4kFMlxbAugRou5lwDKcSm9Fj7TTlkeppaSRF89MTTKrxOSAuhSzP8U+p6jzOAEVcP32qhih3kXcboc6nM+7YplTQNSOSg8Ar1PV5llu1nOheX9ZV5axck34jFJzGtrswbWZQ1CWFRduGgTA5MNrXWjFAQc/sCQKQZ5437py/3Oxvf2zrSEl2WbTXLFcsPwlZuBbSobsWmEb67WEf9+6xQitAHlcy94xmNVt9fy0nDQpNGoTqy60CaSO/o5DJluHy1gCGXZT0ujteqH7mpUo5CWbsF8qe+TcPDxc91dLljOV5wmvo6ihsH7sLJrr0ggJLXbQXDrcmOKSzk8fnSK80MB7gc92sI1w057Pvg776Ype/wpSbH3QIqigAkKmVCSvD0ipmAtfP2jZPRBweOTiaFgYBXZudpWmAsY5EOBegYkfgCjX4iUtY5eumvXY5qS8LXmrOPMc=
